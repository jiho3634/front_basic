<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body>
    <object data="../common/header.html" type="text/html" width="100%" height="100"></object>
    <div class="container">
        <div class="page-header">
            <h3>글쓰기</h3>
        </div>
        <form id="postForm">
            <div class="form-group">
                <label for="title">제목</label>
                <input type="text" class="form-control" name="title" id="title">
            </div>
            <div class="form-group">
                <label for="contents">내용입력</label>
                <textarea name="contents" id="contents" class="form-control" rows="30" maxlength="800"
                    placeholder="내용을 여기에 써주세요."></textarea>
            </div>
            <div>
                <button type="submit" class="btn btn-secondary">제출</button>
            </div>
        </form>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
            document.getElementById('postForm').addEventListener('submit',
                async function(event) {
                    event.preventDefault();
                    const title = document.getElementById('title').value;
                    const contents = document.getElementById('contents').value;
                    //title=hong&contents=hong... 식으로 들어간다. 
                    const formData = new FormData();
                    formData.append('title', title);
                    formData.append('contents', contents);
                    try {
                        const response = await axios.post('http://localhost:8081/author/register2');
                        console.log(response.data);
                    } catch (e) {
                        console.log(e.message);
                    }
                })
        </script>
    </div>
</body>

</html>